pdi:
  metadata: # type of small values for which PDI keeps a copy

     nx: int #Domain size per proc
     ny: int #Domain size per proc

     mpi_max_rank: { size: 2, type: array, subtype: int } #MPI domain decomposition
     mpi_coords:   { size: 2, type: array, subtype: int } #Coordinate of the current MPI_process

     time: double
     nwrite: int


  data: # type of values for which PDI does not keep a copy
    main_field: { size: [ '$nx+2', '$ny+2' ], type: array, subtype: double }
  
  plugins:
    mpi:
    decl_hdf5:
      file: data_${nwrite:04}.h5
      communicator: $MPI_COMM_WORLD # the MPI communicator used for HDF5 parallel synchronized write
      datasets: # type of the datasets to create in file
        data:
          type: array
          subtype: double
          size: ['$nx*$mpi_max_rank[0]', '$ny*$mpi_max_rank[1]']
      write:
        main_field: # the name of the data to write
          dataset: data
          memory_selection:  # exclude ghosts from the data in memory
            size:  ['$nx', '$ny']
            start: [1, 1]
          dataset_selection: # only write into a single slice in time
            size:  ['$nx', '$ny']
            start: ['$nx*$mpi_coords[0]', '$ny*$mpi_coords[1]']

        time: